# ===================================================================
# 关山智能系统 - 生产环境配置示例
# Production Environment Configuration Example
# ===================================================================
#
# 使用说明：
# 1. 复制此文件为 .env
# 2. 替换所有占位符为实际生产环境的值
# 3. 确保密码强度足够（建议16位以上，包含大小写字母、数字、符号）
# 4. 绝对不要将 .env 文件提交到Git仓库
# 5. 定期更新密钥和密码
#
# ===================================================================

# ====================
# 应用基础配置
# ====================
APP_NAME="Guanshan Intelligence System"
VERSION=1.0.0
DEBUG=false                               # 生产环境必须设为false
HOST=0.0.0.0
PORT=8000
WORKERS=4                                  # 根据服务器CPU核心数调整
LOG_LEVEL=INFO                            # 生产环境使用INFO，调试时使用DEBUG

# ====================
# 测试模式配置
# ====================
TEST_MODE=false                           # 生产环境必须为false
TEST_MAX_RESULTS=5
TEST_DEFAULT_LIMIT=5

# ====================
# 安全配置
# ====================
# ⚠️ 重要：生产环境必须使用强密钥
SECRET_KEY=CHANGE_THIS_TO_STRONG_SECRET_KEY_IN_PRODUCTION
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
# 允许的前端域名（用逗号分隔）
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ====================
# MongoDB配置（线上生产数据库）
# ====================
# 服务器信息：
# - 主机: hancens.top
# - 端口: 40717 (非标准端口)
# - 数据库: guanshan
# - 用户: guanshan
# - 认证数据库: guanshan
#
# ⚠️ 必须填写实际密码
# 如果密码包含特殊字符，需要进行URL编码：
#   @ → %40  : → %3A  / → %2F  ? → %3F  # → %23  & → %26
#
MONGODB_URL=mongodb://guanshan:YOUR_MONGODB_PASSWORD_HERE@hancens.top:40717/?authSource=guanshan
MONGODB_DB_NAME=guanshan
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10

# ====================
# MariaDB配置
# ====================
# 如果需要使用MariaDB，请配置以下项
MARIADB_URL=mysql+aiomysql://db_user:db_password@your_mariadb_host:3306/guanshan
MARIADB_POOL_SIZE=20
MARIADB_MAX_OVERFLOW=10
MARIADB_POOL_TIMEOUT=30

# ====================
# Redis缓存配置
# ====================
# 如果需要使用Redis，请配置以下项
REDIS_URL=redis://your_redis_host:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_DECODE_RESPONSES=true

# ====================
# RabbitMQ消息队列
# ====================
# 如果需要使用RabbitMQ，请配置以下项
RABBITMQ_URL=amqp://rabbitmq_user:rabbitmq_password@your_rabbitmq_host:5672//
RABBITMQ_EXCHANGE=intelligent_system
RABBITMQ_QUEUE_PREFIX=is_

# ====================
# Firecrawl爬虫配置
# ====================
# ⚠️ 必须配置有效的Firecrawl API密钥
FIRECRAWL_API_KEY=fc-your-actual-firecrawl-api-key-here
FIRECRAWL_BASE_URL=https://api.firecrawl.dev
FIRECRAWL_TIMEOUT=30
FIRECRAWL_MAX_RETRIES=3

# ====================
# LLM配置
# ====================
LLM_PROVIDER=openai
# 如果使用OpenAI
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
# 如果使用Claude
CLAUDE_API_KEY=your-claude-api-key-here
CLAUDE_MODEL=claude-3-opus-20240229

# ====================
# 向量数据库配置
# ====================
VECTOR_DB_TYPE=qdrant
QDRANT_URL=http://your_qdrant_host:6333
QDRANT_API_KEY=your_qdrant_api_key_if_needed
QDRANT_COLLECTION=documents

# ====================
# RAG配置
# ====================
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
TOP_K_RETRIEVAL=5
RERANK_MODEL=

# ===================================================================
# 生产环境部署检查清单
# ===================================================================
#
# [ ] 1. 所有密码和API密钥已更换为强密码
# [ ] 2. DEBUG设置为false
# [ ] 3. TEST_MODE设置为false
# [ ] 4. MongoDB连接字符串已填写正确的密码
# [ ] 5. ALLOWED_ORIGINS已设置为实际的前端域名
# [ ] 6. SECRET_KEY已更换为强随机密钥（建议使用: python -c "import secrets; print(secrets.token_urlsafe(32))"）
# [ ] 7. Firecrawl API密钥已配置
# [ ] 8. 日志级别设置为INFO
# [ ] 9. 防火墙已开放必要端口（MongoDB: 40717, API: 8000）
# [ ] 10. 已测试数据库连接成功
#
# ===================================================================
# 连接测试命令
# ===================================================================
#
# 测试MongoDB连接：
# python scripts/test_production_database.py
#
# 查看MongoDB数据库概览：
# python scripts/mongodb_connection_helper.py --overview
#
# ===================================================================
