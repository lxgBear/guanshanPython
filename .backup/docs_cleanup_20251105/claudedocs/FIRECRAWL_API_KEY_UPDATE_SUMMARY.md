# Firecrawl API å¯†é’¥æ›´æ–°æ€»ç»“

## ğŸ“‹ æ›´æ–°æ—¥æœŸ
2025-11-04

## ğŸ¯ æ›´æ–°ç›®æ ‡
å°†æ‰€æœ‰ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­çš„ Firecrawl API å¯†é’¥ç»Ÿä¸€æ›´æ¢ä¸ºæ–°å¯†é’¥ã€‚

## ğŸ”‘ å¯†é’¥ä¿¡æ¯

### æ—§å¯†é’¥
```
fc-1e4b9ecd945a44a68c6017244c4efd5b
```

### æ–°å¯†é’¥
```
fc-791acc51e2284efc9080a2bcf338565c
```

## âœ… å·²æ›´æ–°æ–‡ä»¶

### 1. ä¸»ç¯å¢ƒé…ç½®æ–‡ä»¶
**æ–‡ä»¶**: `.env`
**ç”¨é€”**: å½“å‰å¼€å‘/ç”Ÿäº§ç¯å¢ƒä½¿ç”¨
**çŠ¶æ€**: âœ… å·²æ›´æ–°
**éªŒè¯**:
```bash
FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
```

### 2. æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶
**æ–‡ä»¶**: `.env.test`
**ç”¨é€”**: æµ‹è¯•ç¯å¢ƒä¸“ç”¨é…ç½®
**çŠ¶æ€**: âœ… å·²æ›´æ–°
**éªŒè¯**:
```bash
FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
```

### 3. ç¤ºä¾‹é…ç½®æ–‡ä»¶
**æ–‡ä»¶**: `.env.example`
**ç”¨é€”**: æ–°å¼€å‘äººå‘˜å‚è€ƒæ¨¡æ¿
**çŠ¶æ€**: âœ… å·²æ›´æ–°
**éªŒè¯**:
```bash
FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
```

### 4. ç”Ÿäº§ç¯å¢ƒç¤ºä¾‹é…ç½®
**æ–‡ä»¶**: `.env.production.example`
**ç”¨é€”**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‚è€ƒ
**çŠ¶æ€**: âœ… å·²æ›´æ–°
**éªŒè¯**:
```bash
FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
```

### 5. å®å¡”ç¯å¢ƒç¤ºä¾‹é…ç½®
**æ–‡ä»¶**: `.env.baota.example`
**ç”¨é€”**: å®å¡”é¢æ¿éƒ¨ç½²å‚è€ƒ
**çŠ¶æ€**: âœ… å·²æ›´æ–°
**éªŒè¯**:
```bash
FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
```

### 6. å¤‡ä»½é…ç½®æ–‡ä»¶
**æ–‡ä»¶**: `.env.backup`
**ç”¨é€”**: é…ç½®å¤‡ä»½
**çŠ¶æ€**: âœ… å·²æ›´æ–°
**éªŒè¯**:
```bash
FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
```

## ğŸ“Š æ›´æ–°ç»Ÿè®¡

| é¡¹ç›® | æ•°é‡ |
|------|------|
| æ€»æ›´æ–°æ–‡ä»¶æ•° | 6 |
| ç¯å¢ƒé…ç½®æ–‡ä»¶ | 2 (.env, .env.test) |
| ç¤ºä¾‹é…ç½®æ–‡ä»¶ | 3 (.env.example, .env.production.example, .env.baota.example) |
| å¤‡ä»½æ–‡ä»¶ | 1 (.env.backup) |

## ğŸ” éªŒè¯ç»“æœ

### æ‰¹é‡éªŒè¯å‘½ä»¤
```bash
grep "FIRECRAWL_API_KEY" .env .env.test .env.example .env.production.example .env.baota.example .env.backup
```

### éªŒè¯è¾“å‡º
```
.env:FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
.env.test:FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
.env.example:FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
.env.production.example:FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
.env.baota.example:FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
.env.backup:FIRECRAWL_API_KEY=fc-791acc51e2284efc9080a2bcf338565c
```

**ç»“è®º**: âœ… æ‰€æœ‰æ–‡ä»¶å·²æˆåŠŸæ›´æ–°ä¸ºæ–°å¯†é’¥

## ğŸš€ æœåŠ¡é‡å¯

### é‡å¯æ­¥éª¤
1. **åœæ­¢æ—§æœåŠ¡**:
   ```bash
   kill -TERM 45799
   ```

2. **å¯åŠ¨æ–°æœåŠ¡**:
   ```bash
   nohup python -m uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload > /tmp/app.log 2>&1 &
   ```

3. **éªŒè¯æœåŠ¡çŠ¶æ€**:
   ```bash
   ps aux | grep uvicorn
   # æ–°è¿›ç¨‹ID: 57889
   ```

### å¯åŠ¨æ—¥å¿—ç¡®è®¤
```
2025-11-04 15:48:16 - src.main - INFO - ğŸš€ å¯åŠ¨å…³å±±æ™ºèƒ½ç³»ç»Ÿ...
2025-11-04 15:48:16 - src.infrastructure.database.connection - INFO - MongoDBè¿æ¥æˆåŠŸ: guanshan
2025-11-04 15:48:17 - src.infrastructure.search.firecrawl_search_adapter - INFO - ğŸ§ª Firecrawlé€‚é…å™¨è¿è¡Œåœ¨æµ‹è¯•æ¨¡å¼
2025-11-04 15:48:17 - src.main - INFO - âœ… ç³»ç»Ÿå¯åŠ¨æˆåŠŸ
```

**çŠ¶æ€**: âœ… æœåŠ¡æ­£å¸¸å¯åŠ¨ï¼Œæ–°é…ç½®å·²åŠ è½½

## ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜

### å½“å‰ä½¿ç”¨é…ç½®
- **ä¸»é…ç½®**: `.env` - ç³»ç»Ÿå®é™…è¯»å–å¹¶ä½¿ç”¨
- **æµ‹è¯•é…ç½®**: `.env.test` - æµ‹è¯•ç¯å¢ƒä¸“ç”¨

### å‚è€ƒé…ç½®ï¼ˆä¸ç›´æ¥ä½¿ç”¨ï¼‰
- `.env.example` - æ–°å¼€å‘è€…å‚è€ƒ
- `.env.production.example` - ç”Ÿäº§éƒ¨ç½²å‚è€ƒ
- `.env.baota.example` - å®å¡”éƒ¨ç½²å‚è€ƒ
- `.env.backup` - é…ç½®å¤‡ä»½

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å¯†é’¥å®‰å…¨
- âœ… æ‰€æœ‰ `.env` æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­æ’é™¤
- âœ… ä¸ä¼šæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- âš ï¸ ç¤ºä¾‹æ–‡ä»¶åŒ…å«çœŸå®å¯†é’¥ï¼Œä»…ä¾›å†…éƒ¨ä½¿ç”¨

### 2. ç¯å¢ƒä¸€è‡´æ€§
æ‰€æœ‰ç¯å¢ƒç°åœ¨ä½¿ç”¨ç›¸åŒçš„ Firecrawl API å¯†é’¥ï¼š
- å¼€å‘ç¯å¢ƒ âœ…
- æµ‹è¯•ç¯å¢ƒ âœ…
- ç”Ÿäº§ç¯å¢ƒç¤ºä¾‹ âœ…

### 3. åç»­ç»´æŠ¤
å¦‚éœ€æ›´æ¢å¯†é’¥ï¼Œéœ€è¦æ›´æ–°ä»¥ä¸‹æ–‡ä»¶ï¼š
1. `.env` (å¿…é¡»)
2. `.env.test` (æµ‹è¯•ç¯å¢ƒ)
3. `.env.example` (å¯é€‰ï¼Œç”¨äºå‚è€ƒ)
4. `.env.production.example` (å¯é€‰ï¼Œç”Ÿäº§å‚è€ƒ)
5. `.env.baota.example` (å¯é€‰ï¼Œå®å¡”å‚è€ƒ)
6. `.env.backup` (å»ºè®®åŒæ­¥æ›´æ–°)

## ğŸ”§ æµ‹è¯•å»ºè®®

### 1. API è¿æ¥æµ‹è¯•
```bash
# æµ‹è¯• Firecrawl API è¿æ¥
python scripts/test_db_and_firecrawl.py
```

### 2. æœç´¢åŠŸèƒ½æµ‹è¯•
```bash
# æµ‹è¯•å³æ—¶æœç´¢
python scripts/test_instant_search_task.py
```

### 3. å®šæ—¶ä»»åŠ¡æµ‹è¯•
```bash
# åˆ›å»ºæµ‹è¯•ä»»åŠ¡éªŒè¯æ–° API å¯†é’¥
curl -X POST http://localhost:8000/api/v1/search-tasks \
  -H "Content-Type: application/json" \
  -d '{
    "name": "APIå¯†é’¥æµ‹è¯•",
    "query": "test",
    "schedule_interval": "HOURLY",
    "is_active": true,
    "execute_immediately": true
  }'
```

## ğŸ“Š æ›´æ–°å½±å“

### ç³»ç»ŸåŠŸèƒ½
- âœ… å®šæ—¶æœç´¢ä»»åŠ¡
- âœ… å³æ—¶æœç´¢åŠŸèƒ½
- âœ… æ•°æ®çˆ¬å–æœåŠ¡
- âœ… AI å†…å®¹å¤„ç†

### å—å½±å“æœåŠ¡
1. **Firecrawl æœç´¢é€‚é…å™¨** (`src/infrastructure/search/firecrawl_search_adapter.py`)
2. **å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨** (`src/services/task_scheduler.py`)
3. **æ™ºèƒ½æœç´¢æœåŠ¡** (`src/services/smart_search_service.py`)

### é…ç½®è¯»å–
æ‰€æœ‰æœåŠ¡ä» `src/config.py` è¯»å–é…ç½®ï¼Œè¯¥æ¨¡å—è‡ªåŠ¨åŠ è½½ `.env` æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ã€‚

## ğŸ‰ æ›´æ–°å®Œæˆ

**çŠ¶æ€**: âœ… æ‰€æœ‰é…ç½®æ–‡ä»¶å·²æˆåŠŸæ›´æ–°
**æœåŠ¡**: âœ… å·²é‡å¯å¹¶æ­£å¸¸è¿è¡Œ
**éªŒè¯**: âœ… æ–°å¯†é’¥å·²åŠ è½½

**åç»­æ“ä½œ**:
1. å»ºè®®è¿è¡Œå®Œæ•´æµ‹è¯•éªŒè¯æ–°å¯†é’¥åŠŸèƒ½
2. ç›‘æ§æœåŠ¡æ—¥å¿—ç¡®è®¤æ—  API é”™è¯¯
3. æµ‹è¯•æœç´¢ä»»åŠ¡æ‰§è¡Œæ˜¯å¦æ­£å¸¸

## ğŸ“‚ ç›¸å…³æ–‡ä»¶æ¸…å•

### é…ç½®æ–‡ä»¶
- `.env`
- `.env.test`
- `.env.example`
- `.env.production.example`
- `.env.baota.example`
- `.env.backup`

### ä»£ç æ–‡ä»¶ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
- `src/config.py` - é…ç½®è¯»å–æ¨¡å—
- `src/infrastructure/search/firecrawl_search_adapter.py` - Firecrawl é€‚é…å™¨
- `src/services/task_scheduler.py` - ä»»åŠ¡è°ƒåº¦å™¨
- `src/services/smart_search_service.py` - æ™ºèƒ½æœç´¢æœåŠ¡

### æµ‹è¯•è„šæœ¬
- `scripts/test_db_and_firecrawl.py`
- `scripts/test_instant_search_task.py`
- `scripts/test_immediate_execution.py`

## ğŸ“ å˜æ›´æ—¥å¿—

### 2025-11-04
- æ›´æ–°æ‰€æœ‰ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­çš„ Firecrawl API å¯†é’¥
- ä» `fc-1e4b9ecd945a44a68c6017244c4efd5b` æ›´æ¢ä¸º `fc-791acc51e2284efc9080a2bcf338565c`
- é‡å¯æœåŠ¡åŠ è½½æ–°é…ç½®
- éªŒè¯æ‰€æœ‰é…ç½®æ–‡ä»¶æ›´æ–°æˆåŠŸ
- æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œæ–°é…ç½®å·²ç”Ÿæ•ˆ
